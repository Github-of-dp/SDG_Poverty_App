<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SDG-1 Poverty Risk App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(to bottom, #0f172a, #1e293b);
    color: #fff;
    margin: 0;
}
.container { max-width: 900px; margin: auto; padding: 20px; }
.card {
    background: #1e293b;
    border-radius: 16px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.4);
}
h1, h2 { color: #38bdf8; text-align: center; }
input, button {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 8px;
    border: none;
}
input { background: #334155; color: #fff; }
button {
    background: #22c55e;
    font-weight: bold;
    cursor: pointer;
}
.result { text-align: center; margin-top: 10px; }
</style>
</head>

<body>
<div class="container">

<!-- HERO FEATURE -->
<div class="card">
<h1>SDG-1: Poverty Risk Predictor</h1>
<input id="income" placeholder="Monthly Income">
<input id="education" placeholder="Education Level">
<input id="employment" placeholder="Employment (0/1)">
<button onclick="predict()">Predict Risk</button>
<div class="result" id="riskResult"></div>
</div>

<!-- BUDGET PLANNER -->
<div class="card">
<h2>Budget Planner</h2>
<input id="budgetIncome" placeholder="Monthly Income">
<input id="expenses" placeholder="Monthly Expenses">
<button onclick="budget()">Calculate</button>
<div class="result" id="budgetResult"></div>
</div>

<!-- RECOMMENDATIONS -->
<div class="card">
<h2>Personalized Recommendations</h2>
<button onclick="getTips()">Get Tips</button>
<ul id="tips"></ul>
</div>

<!-- TRENDS -->
<div class="card">
<h2>Poverty Trend Analytics</h2>
<canvas id="trendChart"></canvas>
</div>

</div>

<script>
let latestRisk = 0;

function predict() {
fetch('/predict', {
method:'POST',
headers:{'Content-Type':'application/json'},
body: JSON.stringify({
    income: income.value,
    education: education.value,
    employment: employment.value
})
})
.then(r=>r.json())
.then(d=>{
    latestRisk = d.risk;
    riskResult.innerHTML = `<h3>${d.status}</h3>Risk Probability: ${d.risk}%`;
});
}

function budget() {
fetch('/budget', {
method:'POST',
headers:{'Content-Type':'application/json'},
body: JSON.stringify({
    income: budgetIncome.value,
    expenses: expenses.value
})
})
.then(r=>r.json())
.then(d=>{
    budgetResult.innerHTML = `Remaining: ${d.remaining}<br>${d.suggestion}`;
});
}

function getTips() {
fetch('/recommendations', {
method:'POST',
headers:{'Content-Type':'application/json'},
body: JSON.stringify({ risk: latestRisk })
})
.then(r=>r.json())
.then(d=>{
    tips.innerHTML = d.tips.map(t=>`<li>${t}</li>`).join('');
});
}

fetch('/trends')
.then(r=>r.json())
.then(d=>{
new Chart(document.getElementById('trendChart'),{
type:'line',
data:{
labels:d.income,
datasets:[{
label:'Poverty Risk',
data:d.risk,
borderColor:'#22c55e',
fill:false
}]
}
});
</script>
</body>
</html>
