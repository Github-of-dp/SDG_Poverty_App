<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SDG-1 Poverty Risk Assessment</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, sans-serif;
    background: #0f172a;
    color: #fff;
    display: flex;
    justify-content: center;
    padding: 30px;
}
.container {
    max-width: 500px;
    width: 100%;
}
.card {
    background: #1e293b;
    padding: 25px;
    border-radius: 16px;
}
h1 { color: #38bdf8; text-align: center; }
.warning, .disclaimer {
    font-size: 13px;
    color: #94a3b8;
    margin-bottom: 15px;
}
input, select, button {
    width: 100%;
    padding: 12px;
    margin-bottom: 12px;
    border-radius: 8px;
    border: none;
}
input, select { background: #334155; color: #fff; }
button {
    background: #22c55e;
    font-weight: bold;
    cursor: pointer;
}
.result {
    margin-top: 20px;
    background: #334155;
    padding: 15px;
    border-radius: 12px;
}
.bar {
    height: 14px;
    background: #0f172a;
    border-radius: 7px;
    overflow: hidden;
    margin: 10px 0;
}
.fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(to right, #22c55e, #facc15, #ef4444);
    transition: width 0.8s;
}
ul { padding-left: 18px; }
</style>
</head>

<body>
<div class="container">
<div class="card">

<h1>SDG-1: Poverty Risk Assessment</h1>

<div class="warning">
âš  This tool is for **educational and awareness purposes only**.  
Income standards vary by country and region.
</div>

<select id="country">
    <option>India</option>
    <option>USA</option>
    <option>UK</option>
    <option>UAE</option>
</select>

<input type="number" id="income" placeholder="Monthly Income">
<input type="number" id="education" placeholder="Years of Education">
<input type="number" id="employment" placeholder="Employment (0 = No, 1 = Yes)">

<button onclick="predict()">Assess Risk</button>

<div class="result" id="result" style="display:none;">
    <h3 id="riskText"></h3>
    <div class="bar"><div class="fill" id="barFill"></div></div>
    <p id="comparison"></p>
    <p id="povertyLine"></p>

    <h4>Suggested Interventions</h4>
    <ul id="suggestions"></ul>
</div>

<div class="disclaimer">
This assessment does not determine legal, financial, or welfare eligibility.
It aligns with the **UN Sustainable Development Goal-1 (No Poverty)** framework.
</div>

</div>
</div>

<script>
const pointer = document.getElementById("pointer");
const statusText = document.getElementById("status");
const probabilityText = document.getElementById("probability");

const inputs = ["income", "education", "employment"].map(
    id => document.getElementById(id)
);

async function predictRisk() {
    const income = parseFloat(document.getElementById("income").value);
    const education = parseFloat(document.getElementById("education").value);
    const employment = parseInt(document.getElementById("employment").value);

    if (isNaN(income) || isNaN(education) || isNaN(employment)) return;

    const response = await fetch("/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            income: income,
            education: education,
            employment: employment
        })
    });

    const result = await response.json();

    const risk = result.probability;

    pointer.style.transform = `rotate(${risk * 1.8}deg)`;
    probabilityText.textContent = `Risk Probability: ${risk}%`;
    statusText.textContent =
        result.poverty_risk === 1 ? "High Poverty Risk" : "Low Poverty Risk";
}

inputs.forEach(input => input.addEventListener("input", predictRisk));
</script>

</body>
</html>
