<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BetterLife AI | SDG 1.2 Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { background: #0a0c10; font-family: 'Inter', sans-serif; color: #f0f0f0; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px; }
        .btn-action { background: #10b981; transition: 0.3s; }
        .btn-action:hover { background: #059669; transform: translateY(-2px); }
        input, select { background: #161b22; border: 1px solid #30363d; border-radius: 8px; padding: 12px; width: 100%; color: white; outline: none; }
        .sdg-badge { background: #e5243b; color: white; padding: 4px 12px; border-radius: 4px; font-size: 10px; font-weight: 800; }
    </style>
</head>
<body class="p-6 md:p-12">

    <div id="disclaimer" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4">
        <div class="glass max-w-md p-8 text-center border-emerald-500/30">
            <h2 class="text-xl font-bold mb-4 text-emerald-400">Educational Project Notice</h2>
            <p class="text-sm text-gray-400 leading-relaxed mb-6">
                This is a <b>mini educational project</b> simulating SDG-1 metrics. The data generated is based on simplified algorithms and <b>cannot be used for official financial or legal purposes</b>. All calculations are for demonstration only.
            </p>
            <button onclick="document.getElementById('disclaimer').remove()" class="btn-action w-full py-3 rounded-lg font-bold text-black">I UNDERSTAND</button>
        </div>
    </div>

    <div class="max-w-6xl mx-auto">
        <header class="flex justify-between items-center mb-12">
            <div>
                <span class="sdg-badge">GOAL 1: NO POVERTY</span>
                <h1 class="text-3xl font-bold mt-2">BetterLife <span class="text-emerald-500">Intelligence</span></h1>
                <p class="text-gray-500 text-xs mt-1">Focus Segment: <b>Target 1.2 (Multidimensional Poverty)</b></p>
            </div>
            <div class="text-right">
                <p class="text-[10px] text-gray-500 uppercase font-bold">Current Region</p>
                <select id="region" onchange="run()" class="mt-1 bg-transparent border-none text-emerald-400 font-bold p-0 w-auto">
                    {% for r in data %}<option value="{{ r }}">{{ r }}</option>{% endfor %}
                </select>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 space-y-6">
                <div class="glass p-6">
                    <h3 class="text-sm font-bold mb-6 text-emerald-500/80">HOUSEHOLD METRICS</h3>
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label class="text-[10px] uppercase text-gray-500 font-bold mb-1 block">Monthly Income</label>
                                <input type="number" id="income" value="5000" oninput="run()">
                            </div>
                            <div>
                                <label class="text-[10px] uppercase text-gray-500 font-bold mb-1 block">Education Years</label>
                                <input type="number" id="edu" value="12" oninput="run()">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-[10px] uppercase text-gray-500 font-bold mb-1 block">Family Size</label>
                                <input type="number" id="h_size" value="4" oninput="run()">
                            </div>
                            <div>
                                <label class="text-[10px] uppercase text-gray-500 font-bold mb-1 block">Working Adults</label>
                                <input type="number" id="workers" value="1" oninput="run()">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass p-6 border-l-2 border-emerald-500/50">
                    <h4 class="text-xs font-bold text-white mb-2 tracking-widest">ABOUT SDG 1.2</h4>
                    <p class="text-[11px] text-gray-400 leading-relaxed italic">
                        "Reduce at least by half the proportion of people living in poverty in all its dimensions." 
                        Our AI monitors three dimensions: <b>Monetary, Educational, and Structural.</b>
                    </p>
                </div>
            </div>

            <div class="lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="glass p-8 flex flex-col items-center justify-center text-center">
                    <p class="text-xs text-gray-500 uppercase font-bold mb-2">Composite Vulnerability</p>
                    <div class="text-7xl font-bold text-white" id="risk_val">0%</div>
                    <p class="text-[10px] mt-4 text-emerald-500 font-bold" id="sdg_status">Analyzing...</p>
                </div>

                <div class="glass p-8">
                    <h4 class="text-xs font-bold text-gray-500 uppercase mb-6">AI Resilience Plan</h4>
                    <ul id="plan_list" class="space-y-4">
                        </ul>
                </div>

                <div class="lg:col-span-2 glass p-6">
                    <h4 class="text-xs font-bold text-gray-500 uppercase mb-4">Dimensional Depth</h4>
                    <div id="bar_container" class="space-y-4">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        async function run() {
            const data = {
                income: document.getElementById('income').value,
                education: document.getElementById('edu').value,
                h_size: document.getElementById('h_size').value,
                workers: document.getElementById('workers').value,
                region: document.getElementById('region').value
            };

            const res = await fetch('/analyze', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            });
            const r = await res.json();

            // Risk Update
            document.getElementById('risk_val').innerText = r.risk + "%";
            document.getElementById('sdg_status').innerText = r.sdg_status;
            document.getElementById('sdg_status').style.color = r.risk > 50 ? '#ef4444' : '#10b981';

            // Plan Update
            const plan = document.getElementById('plan_list');
            plan.innerHTML = '';
            r.plan.forEach(step => {
                plan.innerHTML += `<li class="text-[11px] text-gray-300 flex items-start gap-2">
                    <span class="text-emerald-500">â–¹</span> ${step}
                </li>`;
            });

            // Bars Update
            const bars = document.getElementById('bar_container');
            bars.innerHTML = '';
            for (const [key, val] of Object.entries(r.breakdown)) {
                bars.innerHTML += `
                    <div>
                        <div class="flex justify-between text-[10px] mb-1 uppercase font-bold text-gray-400">
                            <span>${key} Gap</span>
                            <span>${val}%</span>
                        </div>
                        <div class="w-full bg-white/5 h-1 rounded-full overflow-hidden">
                            <div class="bg-emerald-500 h-full transition-all duration-1000" style="width:${val}%"></div>
                        </div>
                    </div>
                `;
            }
        }
        window.onload = run;
    </script>
</body>
</html>
