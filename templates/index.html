<!DOCTYPE html>
<html lang="en">
<head>
<title>Household Poverty Risk Predictor</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg,#fef6ff,#f0fdf4,#eff6ff);
    margin: 0; padding:30px; color:#1f2937;
}
.container { max-width:1300px; margin:auto; }

/* INTRO */
.intro { text-align:center; margin-bottom:40px; }
.intro h1 {
    font-size:40px; font-weight:800;
    background: linear-gradient(90deg,#6366f1,#22c55e,#ec4899);
    -webkit-background-clip:text; color:transparent;
}
.intro p { max-width:900px; margin:10px auto; font-size:15px; color:#475569; }
.disclaimer { font-size:13px; color:#64748b; margin-top:10px; }

/* GRID */
.grid { display:grid; grid-template-columns:1fr 1.3fr 1fr; gap:26px; }
.center { grid-column:2; }

.card {
    background: rgba(255,255,255,0.8); backdrop-filter: blur(12px);
    border-radius:24px; padding:26px;
    box-shadow:0 20px 50px rgba(0,0,0,0.08);
    transition:0.3s ease; animation:fadeUp 0.9s ease;
}
.card:hover { transform:translateY(-6px); }
h3 { margin-top:0; font-size:20px; }

/* FORM */
input, select, button {
    width:100%; padding:12px; margin-top:8px;
    border-radius:12px; border:1px solid #cbd5e1; font-size:14px;
}
button { background:linear-gradient(135deg,#22c55e,#3b82f6,#ec4899); color:white; font-weight:700; border:none; cursor:pointer; margin-top:16px; }
button:hover { filter:brightness(1.05); }

/* BARS */
.bar { height:18px; background:#e5e7eb; border-radius:999px; overflow:hidden; margin-top:12px; }
.fill { height:100%; width:0%; border-radius:999px; transition:width 0.7s ease; }
.info { font-size:14px; margin-top:10px; color:#374151; }

/* HISTORY */
.history-box { max-height:200px; overflow-y:auto; padding-right:6px; }
.history-item { font-size:13px; padding:8px 0; border-bottom:1px dashed #cbd5e1; }

/* FOOTER */
.footer { text-align:center; font-size:13px; margin-top:50px; color:#64748b; }

/* ANIMATIONS */
@keyframes fadeUp { from{opacity:0;transform:translateY(25px);} to{opacity:1;transform:translateY(0);} }
</style>
</head>
<body>
<div class="container">

<!-- INTRO -->
<div class="intro">
    <h1>üè† Household Poverty Risk Predictor</h1>
    <p>
        AI-driven prototype estimating <b>household poverty vulnerability</b>
        using income, education, employment, dependency ratio ‚Äî aligned with
        <b>UN SDG-1: No Poverty</b>.
    </p>
    <div class="disclaimer">‚ö† Educational project only. Not an official poverty assessment.</div>
</div>

<!-- GRID -->
<div class="grid">

<!-- LEFT CARD -->
<div class="card" style="background:linear-gradient(135deg,#ecfeff,#f0fdf4);">
    <h3>üìä Poverty Risk Output</h3>
    <div id="result">Awaiting analysis</div>
    <div class="bar"><div id="fill" class="fill"></div></div>
    <div id="comparison" class="info"></div>
    <div id="why" class="info"></div>
</div>

<!-- CENTER CARD -->
<div class="card center" style="background:linear-gradient(135deg,#fef3c7,#fde68a);">
    <h3>üè† Household Details</h3>
    <form id="form">
        <input name="income" type="number" placeholder="Monthly Household Income" required>
        <input name="education" type="number" placeholder="Highest Years of Education" required>
        <input name="household_size" type="number" placeholder="Total Members" required>
        <input name="working_members" type="number" placeholder="Working Members" required>
        <select name="employment">
            <option value="1">At least one employed</option>
            <option value="0">No employed members</option>
        </select>
        <select name="country">
            <option>India</option><option>USA</option><option>UK</option><option>UAE</option><option>Nigeria</option><option>Brazil</option>
        </select>
        <button>Analyze Risk</button>
    </form>
</div>

<!-- RIGHT CARD -->
<div class="card" style="background:linear-gradient(135deg,#fce7f3,#fdf2f8);">
    <h3>üîÆ Scenario Simulation</h3>
    <p class="info">What-if future improvements?</p>
    <form id="scenario">
        <input name="income" type="number" placeholder="Hypothetical Income" required>
        <input name="education" type="number" placeholder="Hypothetical Education" required>
        <select name="employment">
            <option value="1">Employed</option>
            <option value="0">Unemployed</option>
        </select>
        <button>Simulate</button>
    </form>
    <div id="scenario-result" class="info"></div>
    <div class="bar"><div id="scenario-fill" class="fill"></div></div>
</div>

<!-- BOTTOM LEFT -->
<div class="card" style="background:linear-gradient(135deg,#e0e7ff,#eef2ff);">
    <h3>üïí Session History & Insights</h3>
    <div class="history-box" id="history"><div class="info">No sessions yet</div></div>
    <div class="info" id="session-insights"></div>
</div>

<!-- BOTTOM RIGHT -->
<div class="card" style="background:linear-gradient(135deg,#dcfce7,#bbf7d0);">
    <h3>üéØ SDG-1 Impact</h3>
    <p class="info">‚Ä¢ Identifies vulnerable households</p>
    <p class="info">‚Ä¢ Demonstrates education & employment leverage</p>
    <p class="info">‚Ä¢ Supports poverty-awareness modelling</p>
</div>

</div>

<div class="footer">Academic AI Prototype ‚Ä¢ Sustainable Development Goal 1</div>
</div>

<script>
async function predict(form) {
    const res = await fetch("/predict", { method:"POST", body:new FormData(form) });
    return await res.json();
}

form.onsubmit = async e => {
    e.preventDefault();
    const d = await predict(form);

    result.innerText = `Risk: ${d.risk}% (${d.level})`;
    fill.style.width = d.risk+"%";
    fill.style.background = d.color;
    comparison.innerText = "üåç " + d.comparison;
    why.innerHTML = "<b>üìå Why this result?</b><br>" + d.why.join("<br>");

    // Update history
    history.innerHTML = "";
    if(d.session_history.length>0){
        d.session_history.forEach(h=>{
            const item = document.createElement("div");
            item.className="history-item";
            item.innerText=`${h.country} | Income: ${h.income} ‚Üí Risk: ${h.risk}% (${h.level})`;
            history.appendChild(item);
        });
    }
    session-insights.innerText = d.session_insights;
};

scenario.onsubmit = async e => {
    e.preventDefault();
    const d = await predict(scenario);
    scenario-result.innerText = `Simulated Risk: ${d.risk}% (${d.level})`;
    scenario-fill.style.width = d.risk+"%";
    scenario-fill.style.background=d.color;
};
</script>
</body>
</html>