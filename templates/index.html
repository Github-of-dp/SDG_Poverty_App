<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BetterLife AI | SDG-1 UAE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(180deg, #0f172a 0%, #1e3a8a 50%, #d97706 100%);
            background-attachment: fixed;
            animation: aurora 15s ease infinite;
            background-size: 400% 400%;
        }
        @keyframes aurora {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
        }
    </style>
</head>
<body class="text-white min-h-screen pb-10">

    <div class="max-w-6xl mx-auto px-6 pt-10">
        <header class="text-center mb-12">
            <h1 class="text-5xl font-black mb-4 tracking-tight text-amber-400">BetterLife AI <span class="text-white">üá¶üá™</span></h1>
            <p class="text-lg opacity-80 max-w-2xl mx-auto">Analyzing Household Vulnerability for <strong>SDG-1: No Poverty</strong>.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="glass p-8 space-y-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-amber-500 font-bold uppercase tracking-widest text-sm">Household Stats</h2>
                    <select id="country" onchange="update()" class="bg-white/10 p-2 rounded-lg outline-none border border-white/20 text-sm">
                        {% for code in countries %}
                        <option value="{{ code }}" class="text-black" {% if code == 'UAE' %}selected{% endif %}>{{ code }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <label>Monthly Income (<span id="curr_label">AED</span>)</label>
                            <span id="inc_val" class="text-amber-400 font-bold">5000</span>
                        </div>
                        <input type="range" id="income" min="0" max="30000" step="100" value="5000" class="w-full h-1 bg-white/20 rounded-lg appearance-none accent-amber-500" oninput="update()">
                    </div>

                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <label>Education (Years)</label>
                            <span id="edu_val" class="text-amber-400 font-bold">12</span>
                        </div>
                        <input type="range" id="education" min="0" max="22" value="12" class="w-full h-1 bg-white/20 rounded-lg appearance-none accent-amber-500" oninput="update()">
                    </div>

                    <div class="grid grid-cols-2 gap-4 pt-4">
                        <div class="bg-white/5 p-4 rounded-xl">
                            <label class="text-[10px] block opacity-60 mb-1">HOUSEHOLD SIZE</label>
                            <input type="number" id="household_size" value="4" class="bg-transparent text-xl font-bold w-full outline-none" oninput="update()">
                        </div>
                        <div class="bg-white/5 p-4 rounded-xl">
                            <label class="text-[10px] block opacity-60 mb-1">WORKING MEMBERS</label>
                            <input type="number" id="working_members" value="2" class="bg-transparent text-xl font-bold w-full outline-none" oninput="update()">
                        </div>
                    </div>

                    <div class="bg-white/5 p-4 rounded-xl">
                        <label class="text-[10px] block opacity-60 mb-1">EMPLOYMENT STATUS</label>
                        <select id="employment" class="bg-transparent text-sm font-bold w-full outline-none" onchange="update()">
                            <option value="1" class="text-black">Currently Employed</option>
                            <option value="0" class="text-black">Unemployed</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="glass p-8 flex flex-col items-center justify-center text-center">
                <div class="relative mb-6">
                    <svg class="w-56 h-56 transform -rotate-90">
                        <circle cx="112" cy="112" r="100" stroke="rgba(255,255,255,0.1)" stroke-width="12" fill="transparent" />
                        <circle id="meter" cx="112" cy="112" r="100" stroke="#f59e0b" stroke-width="12" fill="transparent" 
                                stroke-dasharray="628" stroke-dashoffset="628" stroke-linecap="round" class="transition-all duration-1000" />
                    </svg>
                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                        <span id="risk_score" class="text-6xl font-black">0%</span>
                        <span id="risk_level" class="text-xs font-bold uppercase tracking-widest mt-1">Analyzing</span>
                    </div>
                </div>
                <div id="comparison_text" class="text-sm opacity-70 mb-4 tracking-wide">--</div>
                <div class="bg-white/10 p-5 rounded-2xl w-full border border-white/10">
                    <p id="help_text" class="text-sm italic">"Move sliders to begin risk assessment..."</p>
                </div>
            </div>
        </div>

        <div class="mt-16 max-w-4xl mx-auto space-y-8">
            <section class="glass p-8">
                <h3 class="text-xl font-bold text-amber-400 mb-2">Sustainable Development Goal 1: No Poverty</h3>
                <p class="text-sm opacity-80 leading-relaxed">
                    Goal 1 calls for an end to poverty in all its manifestations by 2030. It aims to ensure social protection for the poor and vulnerable, increase access to basic services and support people harmed by climate-related extreme events and other economic, social and environmental shocks.
                </p>
            </section>
            
            <section class="glass p-8 border-l-4 border-red-500">
                <h3 class="text-sm font-bold text-red-400 uppercase tracking-widest mb-2">‚ö†Ô∏è Scientific Disclaimer</h3>
                <p class="text-[11px] opacity-60 leading-relaxed italic">
                    This tool is a simulated AI model developed for a school project. The "Risk Percentage" is calculated using a hybrid mathematical formula including poverty deficit ratios and dependency factors. This does not constitute professional financial advice. All regional poverty lines are estimates for educational simulation.
                </p>
            </section>
        </div>
    </div>

    <script>
        async function update() {
            const data = {
                income: document.getElementById('income').value,
                education: document.getElementById('education').value,
                employment: document.getElementById('employment').value,
                household_size: document.getElementById('household_size').value,
                working_members: document.getElementById('working_members').value,
                country: document.getElementById('country').value
            };

            document.getElementById('inc_val').innerText = data.income;
            document.getElementById('edu_val').innerText = data.education;

            const res = await fetch('/predict', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            });
            const result = await res.json();

            // Update UI
            document.getElementById('risk_score').innerText = result.risk + "%";
            document.getElementById('risk_level').innerText = result.level + " Risk";
            document.getElementById('curr_label').innerText = result.currency;
            document.getElementById('comparison_text').innerText = result.comparison;
            document.getElementById('help_text').innerText = result.help;

            const meter = document.getElementById('meter');
            const offset = 628 - (628 * result.risk / 100);
            meter.style.strokeDashoffset = offset;

            // Color update
            const colors = { Low: "#10b981", Medium: "#f59e0b", High: "#ef4444" };
            meter.style.stroke = colors[result.level];
            document.getElementById('risk_score').style.color = colors[result.level];
        }
        window.onload = update;
    </script>
</body>
</html>
